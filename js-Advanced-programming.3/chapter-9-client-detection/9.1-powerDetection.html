<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>客户端检测——能力检测</title>
</head>
<body>
	

	<script type="text/javascript">
		
		{
			//最常用也最为人们广泛接受的客户端检测形式是能力检测（又称特性检测）。能力检测的目标不是识别特定的浏览器，而是识别浏览器的能力。采用这种方式不必顾及特定的浏览器如何如何，只要确定浏览器支持特定的能力，就可以给出解决方案。能力检测的基本模式如下：

			function a(){
				if (object.propertyInQuestion){
					//使用 object.propertyInQuestion
				}
			};

			function getElement(id){
				if (document.getElementById){
					return document.getElementById(id);
				} else if (document.all){
					return document.all[id];
				} else {
					throw new Error("No way to retrieve element!");
				}
			};
			/*
			*要理解能力检测，首先必须理解两个重要的概念
			*第一个概念就是先检测达成目的的最常用的特性保证代码最优化
			*第二个重要的概念就是必须测试实际要用到的特性
			 */
			//669887072*/-+
		};

		{
			/*9.1.1		更可靠的能力检测*/
			//检测某个属性是否存在并不能确定对象是否支持排序。更好的方式是检测 某个属性(如sort) 是不是一个函数
			//在可能的情况下，要尽量使用 typeof 进行能力检测。特别是，宿主对象没有义务让 typeof 返回合理的值
			
			//这样更好：检查 sort 是不是函数
			function isSortable(object){
				return typeof object.sort == "function";
			};


			//就意味着，在浏览器环境下测试任何对象的某个特性是否存在，要使用下面这个函数。
			//作者： Peter Michaux
			function isHostMethod(object, property) {
				var t = typeof object[property];
				return t == 'function'  ||	(!!(t=='object' && object[property])) || t=='unknown';
			};

			//可以像下面这样使用这个函数：
			var xhr = new XMLHttpRequest();
			result = isHostMethod(xhr, "open"); //true
			result = isHostMethod(xhr, "foo"); //false

			//实际上，根据浏览器不同将能力组合起来是更可取的方式。如果你知道自己的应用程序需要使用某些特定的浏览器特性，那么最好是一次性检测所有相关特性，而不要分别检测。看下面的例子。
			
			//确定浏览器是否支持 Netscape 风格的插件
			var hasNSPlugins = !!(navigator.plugins && navigator.plugins.length);

			//确定浏览器是否具有 DOM1 级规定的能力
			var hasDOM1 = !!(document.getElementById && document.createElement &&	document.getElementsByTagName);
		};
	</script>
</body>
</html>